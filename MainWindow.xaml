<Window x:Class="MGK_Analyzer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MGK_Analyzer"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        mc:Ignorable="d"
        Title="MGK Analyzer" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen">
    
    <Window.Resources>
        <!-- 슬라이딩 애니메이션을 위한 스타일 -->
        <Storyboard x:Key="SlideInStoryboard">
            <DoubleAnimation Storyboard.TargetName="FileExplorerPanel"
                           Storyboard.TargetProperty="Width"
                           From="0" To="200" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        <Storyboard x:Key="SlideOutStoryboard">
            <DoubleAnimation Storyboard.TargetName="FileExplorerPanel"
                           Storyboard.TargetProperty="Width"
                           From="200" To="0" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 메뉴바 -->
            <RowDefinition Height="Auto"/>
            <!-- 툴바 -->
            <RowDefinition Height="*"/>
            <!-- 메인 작업 영역 -->
            <RowDefinition Height="Auto"/>
            <!-- 상태바 -->
        </Grid.RowDefinitions>

        <!-- 메뉴바 -->
        <Menu Grid.Row="0" Background="White" BorderBrush="LightGray" BorderThickness="0,0,0,1">
            <MenuItem Header="파일(_F)" x:Name="FileMenu">
                <MenuItem Header="새로 만들기(_N)" Click="NewFile_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="NEW" FontSize="8" FontWeight="Bold" Foreground="Blue"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="열기(_O)" Click="OpenFile_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="OPEN" FontSize="8" FontWeight="Bold" Foreground="Green"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="저장(_S)" Click="SaveFile_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="SAVE" FontSize="8" FontWeight="Bold" Foreground="Orange"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="최근 파일(_R)"/>
                <Separator/>
                <MenuItem Header="끝내기(_X)" Click="Exit_Click"/>
            </MenuItem>

            <MenuItem Header="데이터(_D)" x:Name="DataMenu">
                <MenuItem Header="데이터 가져오기(_I)" Click="ImportData_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="IN" FontSize="8" FontWeight="Bold" Foreground="Blue"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="데이터 내보내기(_E)" Click="ExportData_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="OUT" FontSize="8" FontWeight="Bold" Foreground="Red"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="데이터 분석(_A)" Click="AnalyzeData_Click"/>
                <MenuItem Header="데이터 필터링(_F)" Click="FilterData_Click"/>
            </MenuItem>

            <MenuItem Header="프로젝트(_P)" x:Name="ProjectMenu">
                <MenuItem Header="새 프로젝트(_N)" Click="NewProject_Click">
                    <MenuItem.Icon>
                        <TextBlock Text="PROJ" FontSize="8" FontWeight="Bold" Foreground="Purple"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="프로젝트 열기(_O)" Click="OpenProject_Click"/>
                <MenuItem Header="프로젝트 저장(_S)" Click="SaveProject_Click"/>
                <Separator/>
                <MenuItem Header="프로젝트 설정(_C)" Click="ProjectSettings_Click"/>
            </MenuItem>

            <MenuItem Header="도구(_T)" x:Name="ToolsMenu">
                <MenuItem Header="옵션(_O)" Click="Options_Click"/>
                <MenuItem Header="설정(_S)" Click="Settings_Click"/>
            </MenuItem>

            <MenuItem Header="도움말(_H)" x:Name="HelpMenu">
                <MenuItem Header="정보(_A)" Click="About_Click"/>
            </MenuItem>
        </Menu>

        <!-- 툴바 -->
        <ToolBar Grid.Row="1" Background="White" BorderBrush="LightGray" BorderThickness="0,0,0,1">
            <Button x:Name="NewButton" Click="NewFile_Click" ToolTip="새로 만들기">
                <StackPanel Orientation="Horizontal">
                    <Border Background="LightBlue" CornerRadius="2" Padding="2" Margin="2">
                        <TextBlock Text="NEW" FontSize="10" FontWeight="Bold" Foreground="DarkBlue"/>
                    </Border>
                    <TextBlock Text="새로만들기" Margin="5,0" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            
            <Button x:Name="OpenButton" Click="OpenFile_Click" ToolTip="열기">
                <StackPanel Orientation="Horizontal">
                    <Border Background="LightGreen" CornerRadius="2" Padding="2" Margin="2">
                        <TextBlock Text="OPEN" FontSize="10" FontWeight="Bold" Foreground="DarkGreen"/>
                    </Border>
                    <TextBlock Text="열기" Margin="5,0" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            
            <Button x:Name="SaveButton" Click="SaveFile_Click" ToolTip="저장">
                <StackPanel Orientation="Horizontal">
                    <Border Background="LightGoldenrodYellow" CornerRadius="2" Padding="2" Margin="2">
                        <TextBlock Text="SAVE" FontSize="10" FontWeight="Bold" Foreground="DarkOrange"/>
                    </Border>
                    <TextBlock Text="저장" Margin="5,0" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            
            <Separator/>
            
            <Button x:Name="ImportButton" Click="ImportData_Click" ToolTip="데이터 가져오기">
                <StackPanel Orientation="Horizontal">
                    <Border Background="LightBlue" CornerRadius="2" Padding="2" Margin="2">
                        <TextBlock Text="IN" FontSize="10" FontWeight="Bold" Foreground="Blue"/>
                    </Border>
                    <TextBlock Text="가져오기" Margin="5,0" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            
            <Button x:Name="ExportButton" Click="ExportData_Click" ToolTip="데이터 내보내기">
                <StackPanel Orientation="Horizontal">
                    <Border Background="LightCoral" CornerRadius="2" Padding="2" Margin="2">
                        <TextBlock Text="OUT" FontSize="10" FontWeight="Bold" Foreground="DarkRed"/>
                    </Border>
                    <TextBlock Text="내보내기" Margin="5,0" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            
            <Separator/>
            
            <Button x:Name="AnalyzeButton" Click="AnalyzeData_Click" ToolTip="데이터 분석">
                <StackPanel Orientation="Horizontal">
                    <Border Background="LightPink" CornerRadius="2" Padding="2" Margin="2">
                        <TextBlock Text="CHART" FontSize="8" FontWeight="Bold" Foreground="Purple"/>
                    </Border>
                    <TextBlock Text="분석" Margin="5,0" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            
            <Button x:Name="ProjectButton" Click="NewProject_Click" ToolTip="새 프로젝트">
                <StackPanel Orientation="Horizontal">
                    <Border Background="Lavender" CornerRadius="2" Padding="2" Margin="2">
                        <TextBlock Text="PROJ" FontSize="9" FontWeight="Bold" Foreground="Purple"/>
                    </Border>
                    <TextBlock Text="프로젝트" Margin="5,0" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            
            <Separator/>
            
            <Button x:Name="ThemeButton" Click="Settings_Click" ToolTip="테마 설정">
                <StackPanel Orientation="Horizontal">
                    <Border Background="LightSalmon" CornerRadius="2" Padding="2" Margin="2">
                        <TextBlock Text="THEME" FontSize="8" FontWeight="Bold" Foreground="DarkRed"/>
                    </Border>
                    <TextBlock Text="테마" Margin="5,0" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </ToolBar>

        <!-- 메인 작업 영역 with 파일 탐색기 -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <!-- 파일 탐색기 영역 -->
                <ColumnDefinition Width="Auto"/>
                <!-- GridSplitter -->
                <ColumnDefinition Width="*"/>
                <!-- 메인 컨텐츠 영역 -->
            </Grid.ColumnDefinitions>

            <!-- 숨겨진 상태의 탭 버튼 -->
            <Border Grid.Column="0" x:Name="FileExplorerTab"
                    Width="25" Background="#FF2D2D30" 
                    BorderBrush="#FF3E3E42" BorderThickness="0,0,1,0"
                    Cursor="Hand"
                    MouseEnter="FileExplorerTab_MouseEnter"
                    MouseDown="FileExplorerTab_MouseDown">
                <StackPanel Orientation="Vertical" VerticalAlignment="Center">
                    <TextBlock Text="DIR" FontSize="10" Foreground="White" FontWeight="Bold"
                               HorizontalAlignment="Center" Margin="1"/>
                    <TextBlock Text="F" FontSize="8" Foreground="#FFAAAAAA" 
                               HorizontalAlignment="Center" Margin="0,1"/>
                    <TextBlock Text="i" FontSize="8" Foreground="#FFAAAAAA" 
                               HorizontalAlignment="Center" Margin="0,1"/>
                    <TextBlock Text="l" FontSize="8" Foreground="#FFAAAAAA" 
                               HorizontalAlignment="Center" Margin="0,1"/>
                    <TextBlock Text="e" FontSize="8" Foreground="#FFAAAAAA" 
                               HorizontalAlignment="Center" Margin="0,1"/>
                    <TextBlock Text="s" FontSize="8" Foreground="#FFAAAAAA" 
                               HorizontalAlignment="Center" Margin="0,1"/>
                </StackPanel>
            </Border>

            <!-- 파일 탐색기 패널 -->
            <Border Grid.Column="0" x:Name="FileExplorerPanel"
                    Width="0" Background="#FFF5F5F5"
                    BorderBrush="#FFCCCCCC" BorderThickness="0,0,1,0"
                    ClipToBounds="True"
                    MouseLeave="FileExplorerPanel_MouseLeave">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <!-- 헤더 -->
                        <RowDefinition Height="*"/>
                        <!-- 파일 트리 -->
                    </Grid.RowDefinitions>

                    <!-- 파일 탐색기 헤더 -->
                    <Border Grid.Row="0" Background="#FFE1E1E1" 
                            BorderBrush="#FFCCCCCC" BorderThickness="0,0,0,1"
                            Height="30">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0" Text="파일 탐색기" 
                                       FontSize="12" FontWeight="SemiBold"
                                       VerticalAlignment="Center" Margin="8,0"/>
                            
                            <!-- 고정/해제 버튼 -->
                            <ToggleButton Grid.Column="1" x:Name="PinButton"
                                          Width="20" Height="20" Margin="5"
                                          Content="📌" FontSize="10"
                                          Checked="PinButton_Checked"
                                          Unchecked="PinButton_Unchecked"
                                          ToolTip="고정/해제"/>
                        </Grid>
                    </Border>

                    <!-- 파일 트리뷰 -->
                    <TreeView Grid.Row="1" x:Name="FileTreeView"
                              Background="Transparent" BorderThickness="0"
                              Margin="5" ScrollViewer.HorizontalScrollBarVisibility="Auto">
                        <TreeView.ItemContainerStyle>
                            <Style TargetType="TreeViewItem">
                                <Setter Property="IsExpanded" Value="False"/>
                                <Setter Property="FontSize" Value="11"/>
                                <Setter Property="Padding" Value="2"/>
                            </Style>
                        </TreeView.ItemContainerStyle>
                    </TreeView>
                </Grid>
            </Border>

            <!-- GridSplitter for 리사이징 -->
            <GridSplitter Grid.Column="1" x:Name="FileExplorerSplitter"
                          Width="3" Background="#FFCCCCCC"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Stretch"
                          Visibility="Collapsed"
                          IsEnabled="False"/>

            <!-- 메인 컨텐츠 영역 -->
            <Grid Grid.Column="2" Background="WhiteSmoke">
                <TextBlock Text="MGK Analyzer - 메인 작업 영역" 
                           FontSize="24" 
                           FontWeight="Light"
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Center"
                           Foreground="Gray"/>
            </Grid>
        </Grid>

        <!-- 상태바 -->
        <StatusBar Grid.Row="3" Background="White" BorderBrush="LightGray" BorderThickness="0,1,0,0">
            <StatusBarItem>
                <TextBlock x:Name="StatusText" Text="준비"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock x:Name="DateTimeText" Text="{Binding Source={x:Static sys:DateTime.Now}, StringFormat='{}{0:yyyy-MM-dd HH:mm:ss}'}"
                           xmlns:sys="clr-namespace:System;assembly=mscorlib"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
